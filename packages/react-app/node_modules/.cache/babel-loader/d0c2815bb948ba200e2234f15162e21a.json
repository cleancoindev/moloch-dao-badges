{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _get3 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar KeyValueStore = require('./keyValueStore');\n\nvar utils = require('./utils/index');\n\nvar PrivateStore = /*#__PURE__*/function (_KeyValueStore) {\n  (0, _inherits2[\"default\"])(PrivateStore, _KeyValueStore);\n\n  function PrivateStore() {\n    (0, _classCallCheck2[\"default\"])(this, PrivateStore);\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(PrivateStore).apply(this, arguments));\n  }\n\n  (0, _createClass2[\"default\"])(PrivateStore, [{\n    key: \"get\",\n    value: function () {\n      var _get2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(key) {\n        var opts,\n            entry,\n            _args = arguments;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                opts = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n                _context.t0 = (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"get\", this);\n                _context.t1 = this;\n                _context.next = 5;\n                return this._3id.hashDBKey(key);\n\n              case 5:\n                _context.t2 = _context.sent;\n                _context.t3 = opts;\n                _context.next = 9;\n                return _context.t0.call.call(_context.t0, _context.t1, _context.t2, _context.t3);\n\n              case 9:\n                entry = _context.sent;\n\n                if (entry) {\n                  _context.next = 12;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", null);\n\n              case 12:\n                if (!opts.metadata) {\n                  _context.next = 21;\n                  break;\n                }\n\n                _context.t4 = _objectSpread;\n                _context.t5 = {};\n                _context.t6 = entry;\n                _context.next = 18;\n                return this._decryptEntry(entry.value);\n\n              case 18:\n                _context.t7 = _context.sent;\n                _context.t8 = {\n                  value: _context.t7\n                };\n                return _context.abrupt(\"return\", (0, _context.t4)(_context.t5, _context.t6, _context.t8));\n\n              case 21:\n                return _context.abrupt(\"return\", this._decryptEntry(entry));\n\n              case 22:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get(_x) {\n        return _get2.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getMetadata\",\n    value: function () {\n      var _getMetadata = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2(key) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.t0 = (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"getMetadata\", this);\n                _context2.t1 = this;\n                _context2.next = 4;\n                return this._3id.hashDBKey(key);\n\n              case 4:\n                _context2.t2 = _context2.sent;\n                return _context2.abrupt(\"return\", _context2.t0.call.call(_context2.t0, _context2.t1, _context2.t2));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getMetadata(_x2) {\n        return _getMetadata.apply(this, arguments);\n      }\n\n      return getMetadata;\n    }()\n  }, {\n    key: \"set\",\n    value: function () {\n      var _set = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(key, value) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                utils.throwIfUndefined(key, 'key');\n                _context3.next = 3;\n                return this._encryptEntry(value);\n\n              case 3:\n                value = _context3.sent;\n                _context3.next = 6;\n                return this._3id.hashDBKey(key);\n\n              case 6:\n                key = _context3.sent;\n                return _context3.abrupt(\"return\", (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"set\", this).call(this, key, value));\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function set(_x3, _x4) {\n        return _set.apply(this, arguments);\n      }\n\n      return set;\n    }()\n  }, {\n    key: \"setMultiple\",\n    value: function () {\n      var _setMultiple = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(keys, values) {\n        var _this = this;\n\n        var dbKeys, encryptedValues;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                utils.throwIfNotEqualLenArrays(keys, values);\n                _context4.next = 3;\n                return Promise.all(keys.map(function (key) {\n                  return _this._3id.hashDBKey(key);\n                }, this));\n\n              case 3:\n                dbKeys = _context4.sent;\n                _context4.next = 6;\n                return Promise.all(values.map(this._encryptEntry, this));\n\n              case 6:\n                encryptedValues = _context4.sent;\n                return _context4.abrupt(\"return\", (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"setMultiple\", this).call(this, dbKeys, encryptedValues));\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function setMultiple(_x5, _x6) {\n        return _setMultiple.apply(this, arguments);\n      }\n\n      return setMultiple;\n    }()\n  }, {\n    key: \"remove\",\n    value: function () {\n      var _remove = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5(key) {\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                utils.throwIfUndefined(key, 'key');\n                _context5.next = 3;\n                return this._3id.hashDBKey(key);\n\n              case 3:\n                key = _context5.sent;\n                return _context5.abrupt(\"return\", (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"remove\", this).call(this, key));\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function remove(_x7) {\n        return _remove.apply(this, arguments);\n      }\n\n      return remove;\n    }()\n    /**\n     * Returns array of underlying log entries. In linearized order according to their Lamport clocks.\n     * Useful for generating a complete history of all operations on store. Key is hashed, so key is\n     * not available from the private store.\n     *\n     *  @example\n     *  const log = store.log\n     *  const entry = log[0]\n     *  console.log(entry)\n     *  // { op: 'PUT', key: ...., value: 'Botbot', timeStamp: '1538575416068' }\n     *\n     * @return    {Array<Object>}     Array of ordered log entry objects\n     */\n\n  }, {\n    key: \"log\",\n    value: function () {\n      var _log = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6() {\n        var encLog, log, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, entry;\n\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"log\", this).call(this);\n\n              case 2:\n                encLog = _context6.sent;\n                log = [];\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context6.prev = 7;\n                _iterator = encLog[Symbol.iterator]();\n\n              case 9:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  _context6.next = 28;\n                  break;\n                }\n\n                entry = _step.value;\n                _context6.t0 = log;\n                _context6.t1 = Object;\n                _context6.t2 = entry;\n\n                if (!entry.value) {\n                  _context6.next = 20;\n                  break;\n                }\n\n                _context6.next = 17;\n                return this._decryptEntry(entry.value);\n\n              case 17:\n                _context6.t3 = _context6.sent;\n                _context6.next = 21;\n                break;\n\n              case 20:\n                _context6.t3 = null;\n\n              case 21:\n                _context6.t4 = _context6.t3;\n                _context6.t5 = {\n                  value: _context6.t4\n                };\n                _context6.t6 = _context6.t1.assign.call(_context6.t1, _context6.t2, _context6.t5);\n\n                _context6.t0.push.call(_context6.t0, _context6.t6);\n\n              case 25:\n                _iteratorNormalCompletion = true;\n                _context6.next = 9;\n                break;\n\n              case 28:\n                _context6.next = 34;\n                break;\n\n              case 30:\n                _context6.prev = 30;\n                _context6.t7 = _context6[\"catch\"](7);\n                _didIteratorError = true;\n                _iteratorError = _context6.t7;\n\n              case 34:\n                _context6.prev = 34;\n                _context6.prev = 35;\n\n                if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                  _iterator[\"return\"]();\n                }\n\n              case 37:\n                _context6.prev = 37;\n\n                if (!_didIteratorError) {\n                  _context6.next = 40;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 40:\n                return _context6.finish(37);\n\n              case 41:\n                return _context6.finish(34);\n\n              case 42:\n                return _context6.abrupt(\"return\", log);\n\n              case 43:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[7, 30, 34, 42], [35,, 37, 41]]);\n      }));\n\n      function log() {\n        return _log.apply(this, arguments);\n      }\n\n      return log;\n    }()\n  }, {\n    key: \"_encryptEntry\",\n    value: function () {\n      var _encryptEntry2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(entry) {\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!(typeof entry === 'undefined')) {\n                  _context7.next = 2;\n                  break;\n                }\n\n                throw new Error('Entry to encrypt cannot be undefined');\n\n              case 2:\n                return _context7.abrupt(\"return\", this._3id.encrypt(JSON.stringify(entry)));\n\n              case 3:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function _encryptEntry(_x8) {\n        return _encryptEntry2.apply(this, arguments);\n      }\n\n      return _encryptEntry;\n    }()\n  }, {\n    key: \"_decryptEntry\",\n    value: function () {\n      var _decryptEntry2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee8(encObj) {\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.t0 = JSON;\n                _context8.next = 3;\n                return this._3id.decrypt(encObj);\n\n              case 3:\n                _context8.t1 = _context8.sent;\n                return _context8.abrupt(\"return\", _context8.t0.parse.call(_context8.t0, _context8.t1));\n\n              case 5:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function _decryptEntry(_x9) {\n        return _decryptEntry2.apply(this, arguments);\n      }\n\n      return _decryptEntry;\n    }()\n  }]);\n  return PrivateStore;\n}(KeyValueStore);\n\nmodule.exports = PrivateStore;","map":{"version":3,"sources":["/home/dekan/Projects/raid-guild/dao-badges-web/node_modules/3box/lib/privateStore.js"],"names":["_interopRequireDefault","require","_regenerator","_defineProperty2","_asyncToGenerator2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_get3","_inherits2","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","KeyValueStore","utils","PrivateStore","_KeyValueStore","value","_get2","mark","_callee","opts","entry","_args","wrap","_callee$","_context","prev","next","undefined","t0","prototype","t1","_3id","hashDBKey","t2","sent","t3","call","abrupt","metadata","t4","t5","t6","_decryptEntry","t7","t8","stop","get","_x","_getMetadata","_callee2","_callee2$","_context2","getMetadata","_x2","_set","_callee3","_callee3$","_context3","throwIfUndefined","_encryptEntry","set","_x3","_x4","_setMultiple","_callee4","values","_this","dbKeys","encryptedValues","_callee4$","_context4","throwIfNotEqualLenArrays","Promise","all","map","setMultiple","_x5","_x6","_remove","_callee5","_callee5$","_context5","remove","_x7","_log","_callee6","encLog","log","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_callee6$","_context6","Symbol","iterator","done","assign","finish","_encryptEntry2","_callee7","_callee7$","_context7","Error","encrypt","JSON","stringify","_x8","_decryptEntry2","_callee8","encObj","_callee8$","_context8","decrypt","parse","_x9","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _get3 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar KeyValueStore = require('./keyValueStore');\n\nvar utils = require('./utils/index');\n\nvar PrivateStore =\n/*#__PURE__*/\nfunction (_KeyValueStore) {\n  (0, _inherits2[\"default\"])(PrivateStore, _KeyValueStore);\n\n  function PrivateStore() {\n    (0, _classCallCheck2[\"default\"])(this, PrivateStore);\n    return (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(PrivateStore).apply(this, arguments));\n  }\n\n  (0, _createClass2[\"default\"])(PrivateStore, [{\n    key: \"get\",\n    value: function () {\n      var _get2 = (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regenerator[\"default\"].mark(function _callee(key) {\n        var opts,\n            entry,\n            _args = arguments;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                opts = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n                _context.t0 = (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"get\", this);\n                _context.t1 = this;\n                _context.next = 5;\n                return this._3id.hashDBKey(key);\n\n              case 5:\n                _context.t2 = _context.sent;\n                _context.t3 = opts;\n                _context.next = 9;\n                return _context.t0.call.call(_context.t0, _context.t1, _context.t2, _context.t3);\n\n              case 9:\n                entry = _context.sent;\n\n                if (entry) {\n                  _context.next = 12;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", null);\n\n              case 12:\n                if (!opts.metadata) {\n                  _context.next = 21;\n                  break;\n                }\n\n                _context.t4 = _objectSpread;\n                _context.t5 = {};\n                _context.t6 = entry;\n                _context.next = 18;\n                return this._decryptEntry(entry.value);\n\n              case 18:\n                _context.t7 = _context.sent;\n                _context.t8 = {\n                  value: _context.t7\n                };\n                return _context.abrupt(\"return\", (0, _context.t4)(_context.t5, _context.t6, _context.t8));\n\n              case 21:\n                return _context.abrupt(\"return\", this._decryptEntry(entry));\n\n              case 22:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get(_x) {\n        return _get2.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"getMetadata\",\n    value: function () {\n      var _getMetadata = (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regenerator[\"default\"].mark(function _callee2(key) {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.t0 = (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"getMetadata\", this);\n                _context2.t1 = this;\n                _context2.next = 4;\n                return this._3id.hashDBKey(key);\n\n              case 4:\n                _context2.t2 = _context2.sent;\n                return _context2.abrupt(\"return\", _context2.t0.call.call(_context2.t0, _context2.t1, _context2.t2));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getMetadata(_x2) {\n        return _getMetadata.apply(this, arguments);\n      }\n\n      return getMetadata;\n    }()\n  }, {\n    key: \"set\",\n    value: function () {\n      var _set = (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regenerator[\"default\"].mark(function _callee3(key, value) {\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                utils.throwIfUndefined(key, 'key');\n                _context3.next = 3;\n                return this._encryptEntry(value);\n\n              case 3:\n                value = _context3.sent;\n                _context3.next = 6;\n                return this._3id.hashDBKey(key);\n\n              case 6:\n                key = _context3.sent;\n                return _context3.abrupt(\"return\", (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"set\", this).call(this, key, value));\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function set(_x3, _x4) {\n        return _set.apply(this, arguments);\n      }\n\n      return set;\n    }()\n  }, {\n    key: \"setMultiple\",\n    value: function () {\n      var _setMultiple = (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regenerator[\"default\"].mark(function _callee4(keys, values) {\n        var _this = this;\n\n        var dbKeys, encryptedValues;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                utils.throwIfNotEqualLenArrays(keys, values);\n                _context4.next = 3;\n                return Promise.all(keys.map(function (key) {\n                  return _this._3id.hashDBKey(key);\n                }, this));\n\n              case 3:\n                dbKeys = _context4.sent;\n                _context4.next = 6;\n                return Promise.all(values.map(this._encryptEntry, this));\n\n              case 6:\n                encryptedValues = _context4.sent;\n                return _context4.abrupt(\"return\", (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"setMultiple\", this).call(this, dbKeys, encryptedValues));\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function setMultiple(_x5, _x6) {\n        return _setMultiple.apply(this, arguments);\n      }\n\n      return setMultiple;\n    }()\n  }, {\n    key: \"remove\",\n    value: function () {\n      var _remove = (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regenerator[\"default\"].mark(function _callee5(key) {\n        return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                utils.throwIfUndefined(key, 'key');\n                _context5.next = 3;\n                return this._3id.hashDBKey(key);\n\n              case 3:\n                key = _context5.sent;\n                return _context5.abrupt(\"return\", (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"remove\", this).call(this, key));\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function remove(_x7) {\n        return _remove.apply(this, arguments);\n      }\n\n      return remove;\n    }()\n    /**\n     * Returns array of underlying log entries. In linearized order according to their Lamport clocks.\n     * Useful for generating a complete history of all operations on store. Key is hashed, so key is\n     * not available from the private store.\n     *\n     *  @example\n     *  const log = store.log\n     *  const entry = log[0]\n     *  console.log(entry)\n     *  // { op: 'PUT', key: ...., value: 'Botbot', timeStamp: '1538575416068' }\n     *\n     * @return    {Array<Object>}     Array of ordered log entry objects\n     */\n\n  }, {\n    key: \"log\",\n    value: function () {\n      var _log = (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regenerator[\"default\"].mark(function _callee6() {\n        var encLog, log, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, entry;\n\n        return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return (0, _get3[\"default\"])((0, _getPrototypeOf2[\"default\"])(PrivateStore.prototype), \"log\", this).call(this);\n\n              case 2:\n                encLog = _context6.sent;\n                log = [];\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context6.prev = 7;\n                _iterator = encLog[Symbol.iterator]();\n\n              case 9:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  _context6.next = 28;\n                  break;\n                }\n\n                entry = _step.value;\n                _context6.t0 = log;\n                _context6.t1 = Object;\n                _context6.t2 = entry;\n\n                if (!entry.value) {\n                  _context6.next = 20;\n                  break;\n                }\n\n                _context6.next = 17;\n                return this._decryptEntry(entry.value);\n\n              case 17:\n                _context6.t3 = _context6.sent;\n                _context6.next = 21;\n                break;\n\n              case 20:\n                _context6.t3 = null;\n\n              case 21:\n                _context6.t4 = _context6.t3;\n                _context6.t5 = {\n                  value: _context6.t4\n                };\n                _context6.t6 = _context6.t1.assign.call(_context6.t1, _context6.t2, _context6.t5);\n\n                _context6.t0.push.call(_context6.t0, _context6.t6);\n\n              case 25:\n                _iteratorNormalCompletion = true;\n                _context6.next = 9;\n                break;\n\n              case 28:\n                _context6.next = 34;\n                break;\n\n              case 30:\n                _context6.prev = 30;\n                _context6.t7 = _context6[\"catch\"](7);\n                _didIteratorError = true;\n                _iteratorError = _context6.t7;\n\n              case 34:\n                _context6.prev = 34;\n                _context6.prev = 35;\n\n                if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                  _iterator[\"return\"]();\n                }\n\n              case 37:\n                _context6.prev = 37;\n\n                if (!_didIteratorError) {\n                  _context6.next = 40;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 40:\n                return _context6.finish(37);\n\n              case 41:\n                return _context6.finish(34);\n\n              case 42:\n                return _context6.abrupt(\"return\", log);\n\n              case 43:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[7, 30, 34, 42], [35,, 37, 41]]);\n      }));\n\n      function log() {\n        return _log.apply(this, arguments);\n      }\n\n      return log;\n    }()\n  }, {\n    key: \"_encryptEntry\",\n    value: function () {\n      var _encryptEntry2 = (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regenerator[\"default\"].mark(function _callee7(entry) {\n        return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!(typeof entry === 'undefined')) {\n                  _context7.next = 2;\n                  break;\n                }\n\n                throw new Error('Entry to encrypt cannot be undefined');\n\n              case 2:\n                return _context7.abrupt(\"return\", this._3id.encrypt(JSON.stringify(entry)));\n\n              case 3:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function _encryptEntry(_x8) {\n        return _encryptEntry2.apply(this, arguments);\n      }\n\n      return _encryptEntry;\n    }()\n  }, {\n    key: \"_decryptEntry\",\n    value: function () {\n      var _decryptEntry2 = (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regenerator[\"default\"].mark(function _callee8(encObj) {\n        return _regenerator[\"default\"].wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.t0 = JSON;\n                _context8.next = 3;\n                return this._3id.decrypt(encObj);\n\n              case 3:\n                _context8.t1 = _context8.sent;\n                return _context8.abrupt(\"return\", _context8.t0.parse.call(_context8.t0, _context8.t1));\n\n              case 5:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function _decryptEntry(_x9) {\n        return _decryptEntry2.apply(this, arguments);\n      }\n\n      return _decryptEntry;\n    }()\n  }]);\n  return PrivateStore;\n}(KeyValueStore);\n\nmodule.exports = PrivateStore;"]},"metadata":{},"sourceType":"script"}