{"ast":null,"code":"function callbackify(fn) {\n  var fnLength = fn.length;\n  return function () {\n    var args = [].slice.call(arguments);\n    var ctx = this;\n\n    if (args.length === fnLength + 1 && typeof args[fnLength] === 'function') {\n      // callback mode\n      var cb = args.pop();\n      fn.apply(this, args).then(function (val) {\n        cb.call(ctx, null, val);\n      }, function (err) {\n        cb.call(ctx, err);\n      });\n      return;\n    } // promise mode\n\n\n    return fn.apply(ctx, arguments);\n  };\n}\n\nfunction callbackifyVariadic(fn) {\n  return function () {\n    var args = [].slice.call(arguments);\n    var ctx = this;\n\n    if (args.length >= 1 && typeof args[args.length - 1] === 'function') {\n      // callback mode\n      var cb = args.pop();\n      fn.apply(this, args).then(function (val) {\n        cb.call(ctx, null, val);\n      }, function (err) {\n        cb.call(ctx, err);\n      });\n      return;\n    } // promise mode\n\n\n    return fn.apply(ctx, arguments);\n  };\n}\n\nmodule.exports = callbackify;\nmodule.exports.variadic = callbackifyVariadic;","map":{"version":3,"sources":["/home/samkuhlmann/Documents/ody/moloch/moloch-dao-badges/node_modules/callbackify/index.js"],"names":["callbackify","fn","fnLength","length","args","slice","call","arguments","ctx","cb","pop","apply","then","val","err","callbackifyVariadic","module","exports","variadic"],"mappings":"AAAA,SAASA,WAAT,CAAqBC,EAArB,EAAyB;AACvB,MAAIC,QAAQ,GAAGD,EAAE,CAACE,MAAlB;AACA,SAAO,YAAY;AACjB,QAAIC,IAAI,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcC,SAAd,CAAX;AACA,QAAIC,GAAG,GAAG,IAAV;;AACA,QAAIJ,IAAI,CAACD,MAAL,KAAgBD,QAAQ,GAAG,CAA3B,IACA,OAAOE,IAAI,CAACF,QAAD,CAAX,KAA0B,UAD9B,EAC0C;AACxC;AACA,UAAIO,EAAE,GAAGL,IAAI,CAACM,GAAL,EAAT;AACAT,MAAAA,EAAE,CAACU,KAAH,CAAS,IAAT,EAAeP,IAAf,EACGQ,IADH,CACQ,UAAUC,GAAV,EAAe;AAAEJ,QAAAA,EAAE,CAACH,IAAH,CAAQE,GAAR,EAAa,IAAb,EAAmBK,GAAnB;AAAyB,OADlD,EAEI,UAAUC,GAAV,EAAe;AAAEL,QAAAA,EAAE,CAACH,IAAH,CAAQE,GAAR,EAAaM,GAAb;AAAmB,OAFxC;AAGE;AACH,KAXgB,CAYjB;;;AACA,WAAOb,EAAE,CAACU,KAAH,CAASH,GAAT,EAAcD,SAAd,CAAP;AACD,GAdD;AAeD;;AAED,SAASQ,mBAAT,CAA6Bd,EAA7B,EAAiC;AAC/B,SAAO,YAAY;AACjB,QAAIG,IAAI,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcC,SAAd,CAAX;AACA,QAAIC,GAAG,GAAG,IAAV;;AACA,QAAIJ,IAAI,CAACD,MAAL,IAAe,CAAf,IACA,OAAOC,IAAI,CAACA,IAAI,CAACD,MAAL,GAAc,CAAf,CAAX,KAAiC,UADrC,EACiD;AAC/C;AACA,UAAIM,EAAE,GAAGL,IAAI,CAACM,GAAL,EAAT;AACAT,MAAAA,EAAE,CAACU,KAAH,CAAS,IAAT,EAAeP,IAAf,EACGQ,IADH,CACQ,UAAUC,GAAV,EAAe;AAAEJ,QAAAA,EAAE,CAACH,IAAH,CAAQE,GAAR,EAAa,IAAb,EAAmBK,GAAnB;AAAyB,OADlD,EAEI,UAAUC,GAAV,EAAe;AAAEL,QAAAA,EAAE,CAACH,IAAH,CAAQE,GAAR,EAAaM,GAAb;AAAmB,OAFxC;AAGE;AACH,KAXgB,CAYjB;;;AACA,WAAOb,EAAE,CAACU,KAAH,CAASH,GAAT,EAAcD,SAAd,CAAP;AACD,GAdD;AAeD;;AAEDS,MAAM,CAACC,OAAP,GAAiBjB,WAAjB;AACAgB,MAAM,CAACC,OAAP,CAAeC,QAAf,GAA0BH,mBAA1B","sourcesContent":["function callbackify(fn) {\n  var fnLength = fn.length\n  return function () {\n    var args = [].slice.call(arguments)\n    var ctx = this\n    if (args.length === fnLength + 1 &&\n        typeof args[fnLength] === 'function') {\n      // callback mode\n      var cb = args.pop()\n      fn.apply(this, args)\n        .then(function (val) { cb.call(ctx, null, val) },\n          function (err) { cb.call(ctx, err) })\n        return\n    }\n    // promise mode\n    return fn.apply(ctx, arguments)\n  }\n}\n\nfunction callbackifyVariadic(fn) {\n  return function () {\n    var args = [].slice.call(arguments)\n    var ctx = this\n    if (args.length >= 1 &&\n        typeof args[args.length - 1] === 'function') {\n      // callback mode\n      var cb = args.pop()\n      fn.apply(this, args)\n        .then(function (val) { cb.call(ctx, null, val) },\n          function (err) { cb.call(ctx, err) })\n        return\n    }\n    // promise mode\n    return fn.apply(ctx, arguments)\n  }\n}\n\nmodule.exports = callbackify\nmodule.exports.variadic = callbackifyVariadic;\n"]},"metadata":{},"sourceType":"script"}