{"ast":null,"code":"function abortable(onEnd) {\n  var aborted = false,\n      reading = false,\n      ended = false,\n      _cb,\n      _read;\n\n  function doEnd() {\n    if (!onEnd) return;\n    if (aborted && aborted !== true) return onEnd(aborted);\n    if (ended && ended !== true) return onEnd(ended);\n    return onEnd(null);\n  }\n\n  function terminate(err) {\n    doEnd();\n    var cb = _cb;\n    _cb = null;\n    if (cb) cb(aborted || ended);\n  }\n\n  function cancel() {\n    ended = ended || true;\n    terminate(aborted || ended);\n    if (_read) _read(aborted, function (err) {\n      if (_cb) _cb(err || aborted);\n    });\n  }\n\n  function reader(read) {\n    _read = read;\n    return function (abort, cb) {\n      _cb = cb;\n      if (abort) aborted = abort;\n      if (ended) return cb(ended);\n      if (aborted) return;\n      reading = true;\n      read(abort, function (end, data) {\n        reading = false;\n        if (aborted) return !abort && read(aborted, function () {});\n        if (!_cb) return;\n        var cb = _cb;\n        _cb = null;\n\n        if (end) {\n          ended = aborted || end;\n          doEnd();\n          cb(aborted || end);\n        } else {\n          cb(aborted || end, data);\n        }\n      });\n    };\n  }\n\n  reader.abort = function (err) {\n    if (ended) return;\n    aborted = err || true;\n    cancel();\n  };\n\n  return reader;\n}\n\nmodule.exports = abortable;","map":{"version":3,"sources":["/home/samkuhlmann/Documents/ody/moloch/moloch-dao-badges/node_modules/pull-abortable/index.js"],"names":["abortable","onEnd","aborted","reading","ended","_cb","_read","doEnd","terminate","err","cb","cancel","reader","read","abort","end","data","module","exports"],"mappings":"AAAA,SAASA,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,MAAIC,OAAO,GAAG,KAAd;AAAA,MAAqBC,OAAO,GAAG,KAA/B;AAAA,MAAsCC,KAAK,GAAG,KAA9C;AAAA,MAAqDC,GAArD;AAAA,MAA0DC,KAA1D;;AAEA,WAASC,KAAT,GAAkB;AAChB,QAAG,CAACN,KAAJ,EAAW;AACX,QAAGC,OAAO,IAAIA,OAAO,KAAK,IAA1B,EAAgC,OAAOD,KAAK,CAACC,OAAD,CAAZ;AAChC,QAAGE,KAAK,IAAIA,KAAK,KAAK,IAAtB,EAA4B,OAAOH,KAAK,CAACG,KAAD,CAAZ;AAC5B,WAAOH,KAAK,CAAC,IAAD,CAAZ;AACD;;AAED,WAASO,SAAT,CAAoBC,GAApB,EAAyB;AACvBF,IAAAA,KAAK;AACL,QAAIG,EAAE,GAAGL,GAAT;AAAcA,IAAAA,GAAG,GAAG,IAAN;AACd,QAAGK,EAAH,EAAOA,EAAE,CAACR,OAAO,IAAIE,KAAZ,CAAF;AACR;;AAED,WAASO,MAAT,GAAmB;AACjBP,IAAAA,KAAK,GAAGA,KAAK,IAAI,IAAjB;AACAI,IAAAA,SAAS,CAACN,OAAO,IAAIE,KAAZ,CAAT;AACA,QAAGE,KAAH,EACEA,KAAK,CAACJ,OAAD,EAAU,UAAUO,GAAV,EAAe;AAC5B,UAAGJ,GAAH,EAAQA,GAAG,CAACI,GAAG,IAAEP,OAAN,CAAH;AACT,KAFI,CAAL;AAGH;;AAED,WAASU,MAAT,CAAiBC,IAAjB,EAAuB;AACrBP,IAAAA,KAAK,GAAGO,IAAR;AACA,WAAO,UAAUC,KAAV,EAAiBJ,EAAjB,EAAqB;AAC1BL,MAAAA,GAAG,GAAGK,EAAN;AACA,UAAGI,KAAH,EAAYZ,OAAO,GAAGY,KAAV;AACZ,UAAGV,KAAH,EAAY,OAAOM,EAAE,CAACN,KAAD,CAAT;AACZ,UAAGF,OAAH,EAAY;AACZC,MAAAA,OAAO,GAAG,IAAV;AACAU,MAAAA,IAAI,CAACC,KAAD,EAAQ,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AAC/Bb,QAAAA,OAAO,GAAG,KAAV;AACA,YAAGD,OAAH,EAAY,OAAO,CAACY,KAAD,IAAUD,IAAI,CAACX,OAAD,EAAU,YAAY,CAAE,CAAxB,CAArB;AACZ,YAAG,CAACG,GAAJ,EAAS;AACT,YAAIK,EAAE,GAAGL,GAAT;AACAA,QAAAA,GAAG,GAAG,IAAN;;AACA,YAAGU,GAAH,EAAQ;AACNX,UAAAA,KAAK,GAAGF,OAAO,IAAIa,GAAnB;AACAR,UAAAA,KAAK;AACLG,UAAAA,EAAE,CAACR,OAAO,IAAIa,GAAZ,CAAF;AACD,SAJD,MAKK;AACHL,UAAAA,EAAE,CAACR,OAAO,IAAIa,GAAZ,EAAiBC,IAAjB,CAAF;AACD;AACF,OAdG,CAAJ;AAeD,KArBD;AAsBD;;AAEDJ,EAAAA,MAAM,CAACE,KAAP,GAAe,UAAUL,GAAV,EAAe;AAC5B,QAAGL,KAAH,EAAU;AACVF,IAAAA,OAAO,GAAGO,GAAG,IAAI,IAAjB;AACAE,IAAAA,MAAM;AACP,GAJD;;AAMA,SAAOC,MAAP;AACD;;AAEDK,MAAM,CAACC,OAAP,GAAiBlB,SAAjB","sourcesContent":["function abortable(onEnd) {\n  var aborted = false, reading = false, ended = false, _cb, _read\n\n  function doEnd () {\n    if(!onEnd) return\n    if(aborted && aborted !== true) return onEnd(aborted)\n    if(ended && ended !== true) return onEnd(ended)\n    return onEnd(null)\n  }\n\n  function terminate (err) {\n    doEnd()\n    var cb = _cb; _cb = null\n    if(cb) cb(aborted || ended)\n  }\n\n  function cancel () {\n    ended = ended || true\n    terminate(aborted || ended)\n    if(_read)\n      _read(aborted, function (err) {\n        if(_cb) _cb(err||aborted)\n      })\n  }\n\n  function reader (read) {\n    _read = read\n    return function (abort, cb) {\n      _cb = cb\n      if(abort)   aborted = abort\n      if(ended)   return cb(ended)\n      if(aborted) return\n      reading = true\n      read(abort, function (end, data) {\n        reading = false\n        if(aborted) return !abort && read(aborted, function () {})\n        if(!_cb) return\n        var cb = _cb\n        _cb = null\n        if(end) {\n          ended = aborted || end\n          doEnd()\n          cb(aborted || end)\n        }\n        else {\n          cb(aborted || end, data)\n        }\n      })\n    }\n  }\n\n  reader.abort = function (err) {\n    if(ended) return\n    aborted = err || true\n    cancel()\n  }\n\n  return reader\n}\n\nmodule.exports = abortable\n\n\n\n"]},"metadata":{},"sourceType":"script"}