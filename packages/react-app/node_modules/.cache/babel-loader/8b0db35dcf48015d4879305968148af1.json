{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ES256KSigner = ES256KSigner;\nexports.Ed25519Signer = Ed25519Signer;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _base64url = _interopRequireDefault(require(\"base64url\"));\n\nvar _buffer = require(\"buffer\");\n\nfunction ES256KSigner() {\n  var recoverable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  function toJose(_ref) {\n    var r = _ref.r,\n        s = _ref.s,\n        recoveryParam = _ref.recoveryParam;\n\n    var jose = _buffer.Buffer.alloc(recoverable ? 65 : 64);\n\n    _buffer.Buffer.from(r, 'hex').copy(jose, 0);\n\n    _buffer.Buffer.from(s, 'hex').copy(jose, 32);\n\n    if (recoverable) {\n      if (recoveryParam === undefined) throw new Error('Signer did not return a recoveryParam');\n      jose[64] = recoveryParam;\n    }\n\n    return _base64url.default.encode(jose);\n  }\n\n  return /*#__PURE__*/function () {\n    var _sign = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(payload, signer) {\n      var signature;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return signer(payload);\n\n            case 2:\n              signature = _context.sent;\n              return _context.abrupt(\"return\", toJose(signature));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function sign(_x, _x2) {\n      return _sign.apply(this, arguments);\n    }\n\n    return sign;\n  }();\n}\n\nfunction Ed25519Signer() {\n  return /*#__PURE__*/function () {\n    var _sign2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(payload, signer) {\n      return _regenerator.default.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", signer(payload));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function sign(_x3, _x4) {\n      return _sign2.apply(this, arguments);\n    }\n\n    return sign;\n  }();\n}\n\nvar algorithms = {\n  ES256K: ES256KSigner(),\n  'ES256K-R': ES256KSigner(true),\n  'Ed25519': Ed25519Signer()\n};\n\nfunction SignerAlgorithm(alg) {\n  var impl = algorithms[alg];\n  if (!impl) throw new Error(\"Unsupported algorithm \".concat(alg));\n  return impl;\n}\n\nmodule.exports = SignerAlgorithm;","map":{"version":3,"sources":["/home/samkuhlmann/Documents/ody/moloch/moloch-dao-badges/node_modules/did-jwt/lib/SignerAlgorithm.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","ES256KSigner","Ed25519Signer","_regenerator","_asyncToGenerator2","_base64url","_buffer","recoverable","arguments","length","undefined","toJose","_ref","r","s","recoveryParam","jose","Buffer","alloc","from","copy","Error","default","encode","_sign","mark","_callee","payload","signer","signature","wrap","_callee$","_context","prev","next","sent","abrupt","stop","sign","_x","_x2","apply","_sign2","_callee2","_callee2$","_context2","_x3","_x4","algorithms","ES256K","SignerAlgorithm","alg","impl","concat","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ES256KSigner = ES256KSigner;\nexports.Ed25519Signer = Ed25519Signer;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _base64url = _interopRequireDefault(require(\"base64url\"));\n\nvar _buffer = require(\"buffer\");\n\nfunction ES256KSigner() {\n  var recoverable = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  function toJose(_ref) {\n    var r = _ref.r,\n        s = _ref.s,\n        recoveryParam = _ref.recoveryParam;\n\n    var jose = _buffer.Buffer.alloc(recoverable ? 65 : 64);\n\n    _buffer.Buffer.from(r, 'hex').copy(jose, 0);\n\n    _buffer.Buffer.from(s, 'hex').copy(jose, 32);\n\n    if (recoverable) {\n      if (recoveryParam === undefined) throw new Error('Signer did not return a recoveryParam');\n      jose[64] = recoveryParam;\n    }\n\n    return _base64url.default.encode(jose);\n  }\n\n  return (\n    /*#__PURE__*/\n    function () {\n      var _sign = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee(payload, signer) {\n        var signature;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return signer(payload);\n\n              case 2:\n                signature = _context.sent;\n                return _context.abrupt(\"return\", toJose(signature));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function sign(_x, _x2) {\n        return _sign.apply(this, arguments);\n      }\n\n      return sign;\n    }()\n  );\n}\n\nfunction Ed25519Signer() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _sign2 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee2(payload, signer) {\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", signer(payload));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function sign(_x3, _x4) {\n        return _sign2.apply(this, arguments);\n      }\n\n      return sign;\n    }()\n  );\n}\n\nvar algorithms = {\n  ES256K: ES256KSigner(),\n  'ES256K-R': ES256KSigner(true),\n  'Ed25519': Ed25519Signer()\n};\n\nfunction SignerAlgorithm(alg) {\n  var impl = algorithms[alg];\n  if (!impl) throw new Error(\"Unsupported algorithm \".concat(alg));\n  return impl;\n}\n\nmodule.exports = SignerAlgorithm;"]},"metadata":{},"sourceType":"script"}